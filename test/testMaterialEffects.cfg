process eg = {

 # initialize  MessageLogger
# include "FWCore/MessageLogger/data/MessageLogger.cfi"

  service =  RandomNumberGeneratorService {
#	untracked uint32 sourceSeed = 123456789
# This is to initialize the random engine of Famos
# Watch out! This works only if the FamosProducer label is "Famos"
        PSet moduleSeeds = {
#          	untracked uint32 VtxSmeared = 123456789
		untracked uint32 famosSimHits = 13579
#		untracked uint32 siTrackerGaussianSmearingRecHits = 24680
        }
}
	
  service = DaqMonitorROOTBackEnd{}		

 # input
  source = PoolSource {
     #untracked vstring fileNames = {'file:ecal_digis.root'}
#     untracked vstring fileNames = {'/store/unmerged/RelVal/2006/9/24/RelVal101Z-EE/GEN-SIM-DIGI-RECO/0005/0AC156B5-094C-DB11-A4D3-000E0C4D2475.root'}
#     untracked uint32 skipEvents = 477
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
     untracked vstring fileNames = {
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/44CD3EE6-1973-DB11-9E76-00096BB5BFD2.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/6CEF1EC6-8773-DB11-B57B-001560EDC951.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/F0E20E20-8073-DB11-B017-00096BB5C534.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/76FFF28E-8073-DB11-8B8F-00096BB5C10E.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/BC476688-8573-DB11-863D-001560EDC951.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/005C5FBE-8573-DB11-8734-00096BB53E4A.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/76DE5F39-8573-DB11-A2DB-00096BB5BEEA.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/AA9EE654-8573-DB11-8846-00096BB5C4BA.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/FCF5FBA4-8573-DB11-B1B6-001560EDCB17.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/2C682DA9-8573-DB11-B299-00096BB5C484.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/96CEDB0B-8673-DB11-A963-00096BB5BEEA.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/04D0F01D-8673-DB11-A11F-00096BB5C024.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/8CFA513C-8673-DB11-BFA2-00096BB5C4BA.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/AA1E3AAC-8773-DB11-AF4B-00096BB53E4A.root',
    '/store/mc/2006/11/9/mc-physval-111-DiEle-Pt35/0000/9CE23638-8573-DB11-8549-00096BB5C024.root'
  }
}
  # The particle data table
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"   
    es_prefer = PythiaPDTESSource {}
	

   #Geometry
   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"

   #Tracker geometry
   es_module = TrackerGeometricDetESModule {}
   include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
   include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

   #Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"		

#   module o1 = PoolOutputModule { untracked string fileName = "test.root" }
   module famosSimHits = FamosProducer 
   { 
	untracked int32 RunNumber = 1001
	bool UseMagneticField = true
	bool SimulatePileUp = false
	bool SimulateTracking = false
	bool SimulateCalorimetry = false
	untracked int32 Verbosity = 0

# Gaussian or flat or no primary vertex smearing
#	include "FastSimulation/Event/data/GaussianVertexGenerator.cfi"
#	include "FastSimulation/Event/data/FlatVertexGenerator.cfi"
	include "FastSimulation/Event/data/NoVertexGenerator.cfi"

# Kinematic cuts for the particle filter in the SimEvent
	include "FastSimulation/Event/data/ParticleFilter.cfi"

# Material effects to be simulated in the tracker material and associated cuts
	include "FastSimulation/MaterialEffects/data/MaterialEffects.cfi"


# (De)activate decays of unstable particles (K0S, etc...)
	include "FastSimulation/TrajectoryManager/data/ActivateDecays.cfi"

# Conditions to save Tracker SimHits 
	include "FastSimulation/TrajectoryManager/data/TrackerSimHits.cfi"

# FastCalorimetry
	include "FastSimulation/Calorimetry/data/Calorimetry.cfi"


# PileUp Event Generation
#	include "FastSimulation/PileUpProducer/data/PUProducer.cfi"



   }

#  service = SimpleProfiling { }

  # path to run everything
  path p = { famosSimHits, testME }

  module testME = testMaterialEffects
	{
	# module label to find input sim tracks and sim vertices
  # necessary to access true particles 
	PSet TestVertexGenerator = {	
		string type = "None"	
	}	

    	PSet TestParticleFilter = {
		# Particles with |eta| > etaMax (momentum direction at primary vertex) 
		# are not simulated 
       		double etaMax = 5.0
		# Charged particles with pT < pTMin (GeV/c) are not simulated
        	double pTMin =  0.
		# Particles with energy smaller than EMin (GeV) are not simulated
        	double EMin = 0.
    	}
	
	}

  # output module
#  module o2 = PoolOutputModule
#  {
#     untracked string fileName = "egamma_clusters_from_digis.root"
#  }
#
#  endpath outpath = { o2 }
}
