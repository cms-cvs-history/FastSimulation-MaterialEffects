process eg = {

    # The number of events to be processed.
    untracked PSet maxEvents = {untracked int32 input = 300000}

    # initialize  MessageLogger
    # include "FWCore/MessageLogger/data/MessageLogger.cfi"
    
    service =  RandomNumberGeneratorService {
	#	untracked uint32 sourceSeed = 123456789
	# This is to initialize the random engine of Famos
	# Watch out! This works only if the FamosProducer label is "Famos"
        PSet moduleSeeds = {
	    # untracked uint32 VtxSmeared = 123456789
	    untracked uint32 famosSimHits = 13579
	    # untracked uint32 siTrackerGaussianSmearingRecHits = 24680
        }
    }
    
    service = DaqMonitorROOTBackEnd{}		
    
    # input
    source = PoolSource {
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
	/* */
	# Pion 15 GeV
	untracked vstring fileNames = {
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_0.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_1.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_2.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_3.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_4.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_5.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_6.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_7.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_8.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID211-E50/SingleParticlePID211-E50_9.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_0.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_1.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_2.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_3.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_4.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_5.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_6.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_7.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_8.root',
	    'rfio:/castor/cern.ch/user/p/pjanot/CMSSW170pre12/SingleParticlePID-211-E50/SingleParticlePID-211-E50_9.root'
	}
	/* */
    }

    // Use CMSSW170 tuning
    replace famosSimHits.TrackerMaterial.TrackerMaterialVersion = 1

    module testNU = testNuclearInteractions
    {
	// Full, Fast radii and lengths for plots
	untracked vdouble BPCylinderRadius = { 3.2, 3.05 }
	untracked vdouble BPCylinderLength = { 999., 28.3 }  

	untracked vdouble PXB1CylinderRadius = { 6.0, 6.0 } 
	untracked vdouble PXB1CylinderLength = { 28.2, 28.3 } 

	untracked vdouble PXB2CylinderRadius = { 8.5, 8.5 } 
	untracked vdouble PXB2CylinderLength = { 28.2, 28.3 } 

	untracked vdouble PXB3CylinderRadius = { 11.5, 11.5 } 
	untracked vdouble PXB3CylinderLength = { 28.2, 28.3 } 

	untracked vdouble PXBCablesCylinderRadius = { 16.9, 16.9 } 
	untracked vdouble PXBCablesCylinderLength = { 30.0, 30.0 } 

	untracked vdouble PXD1CylinderRadius = { 16.0, 17.0 } 
	untracked vdouble PXD1CylinderLength = { 40.0, 40.0 } 

	untracked vdouble PXD2CylinderRadius = { 16.0, 17.0 } 
	untracked vdouble PXD2CylinderLength = { 52.0, 52.0 } 

	untracked vdouble PXDCablesCylinderRadius = { 22.0, 20.2 } 
	untracked vdouble PXDCablesCylinderLength = { 999.0, 100.0 } 

	untracked vdouble TIB1CylinderRadius = { 30.0, 28.0 } 
	untracked vdouble TIB1CylinderLength = { 68.0, 69.0 } 

	untracked vdouble TIB2CylinderRadius = { 38.0, 37.0 } 
	untracked vdouble TIB2CylinderLength = { 68.0, 69.0 } 

	untracked vdouble TIB3CylinderRadius = { 46.0, 45.0 } 
	untracked vdouble TIB3CylinderLength = { 68.0, 69.0 } 

	untracked vdouble TIB4CylinderRadius = { 54.0, 53.0 } 
	untracked vdouble TIB4CylinderLength = { 68.0, 69.0 } 

	untracked vdouble TIBCablesCylinderRadius = { 53.0, 54.0 } 
	untracked vdouble TIBCablesCylinderLength = { 74.0, 75.0 } 

	untracked vdouble TID1CylinderRadius = { 52.0, 54.0 } 
	untracked vdouble TID1CylinderLength = { 83.0, 83.0 } 

	untracked vdouble TID2CylinderRadius = { 52.0, 54.0 } 
	untracked vdouble TID2CylinderLength = { 95.0, 95.0 } 

	untracked vdouble TID3CylinderRadius = { 52.0, 54.0 } 
	untracked vdouble TID3CylinderLength = { 110.0, 106.0 } 

	untracked vdouble TIDCablesCylinderRadius = { 58.2, 55.5 } 
	untracked vdouble TIDCablesCylinderLength = { 122.0, 108.5 } 

	untracked vdouble TOB1CylinderRadius = { 66.6, 65.0 } 
	untracked vdouble TOB1CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOB2CylinderRadius = { 75.5, 75.0 } 
	untracked vdouble TOB2CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOB3CylinderRadius = { 84.1, 83.0 } 
	untracked vdouble TOB3CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOB4CylinderRadius = { 94.0, 92.0 } 
	untracked vdouble TOB4CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOB5CylinderRadius = { 105.5, 103.0 } 
	untracked vdouble TOB5CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOB6CylinderRadius = { 113.0, 113.0 } 
	untracked vdouble TOB6CylinderLength = { 109.0, 109.0 } 

	untracked vdouble TOBCablesCylinderRadius = { 113.0, 113.0 } 
	untracked vdouble TOBCablesCylinderLength = { 125.0, 125.0 } 

	untracked vdouble TEC1CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC1CylinderLength = { 138.0, 138.0 } 

	untracked vdouble TEC2CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC2CylinderLength = { 152.0, 152.0 } 

	untracked vdouble TEC3CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC3CylinderLength = { 166.0, 166.0 } 

	untracked vdouble TEC4CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC4CylinderLength = { 180.0, 180.0 } 

	untracked vdouble TEC5CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC5CylinderLength = { 195.0, 195.0 } 

	untracked vdouble TEC6CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC6CylinderLength = { 212.0, 212.0 } 

	untracked vdouble TEC7CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC7CylinderLength = { 232.0, 232.0 } 

	untracked vdouble TEC8CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC8CylinderLength = { 254.0, 254.0 } 

	untracked vdouble TEC9CylinderRadius = { 110.0, 110.0 } 
	untracked vdouble TEC9CylinderLength = { 272.0, 272.0 } 

	untracked vdouble TrackerCablesCylinderRadius = { 125.0, 121.0 } 
	untracked vdouble TrackerCablesCylinderLength = { 301.0, 301.0 } 

    	PSet TestParticleFilter = {
	    # Particles with |eta| > etaMax (momentum direction at primary vertex) 
	    # are not simulated 
	    double etaMax = 5.0
	    # Charged particles with pT < pTMin (GeV/c) are not simulated
	    double pTMin =  0.
	    # Particles with energy smaller than EMin (GeV) are not simulated
	    double EMin = 0.
	    # Protons with energy in excess of this value (GeV) will kept no matter what
	    double EProton = 99999.
    	}
	
	bool SaveNuclearInteractions = false
	uint32 MaxNumberOfNuclearInteractions = 45000
	untracked string NUEventFile = "NuclearInteractions_pbar_E2GeV.root"
	untracked string OutputFile = "piplus_E50.root"
	
	
    }

    # Famos SimHits 
    include "FastSimulation/Configuration/data/CommonInputsFake.cff"
    include "FastSimulation/Configuration/data/FamosSequences.cff"
    replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
    replace famosSimHits.SimulateCalorimetry = false
    replace famosSimHits.SimulateTracking = false
    
    # path to run everything
    #  path p = { testNU }
    path p = { famosSimHits, testNU }
    
    #   module o1 = PoolOutputModule { untracked string fileName = "test.root" }
    
    # Keep the logging output to a nice level #
    include "FWCore/MessageService/data/MessageLogger.cfi"
    replace MessageLogger.destinations = {"detailedInfo.txt"}
    
}
